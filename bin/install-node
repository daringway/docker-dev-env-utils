#!/usr/bin/env bash

ENV_NODE_VERSION=${1:-latest}

if [[ "${ENV_NODE_VERSION}" == "latest" ]]
then
    ENV_NODE_VERSION="--lts"
fi

if [[ $(uname -m) == "aarch64" ]]
then
    ARCH="arm64"
else
    ARCH="x86"
fi

B_DIR="node-v${ENV_NODE_VERSION}-linux-${ARCH}"
TAR_FILE="node-v${ENV_NODE_VERSION}-linux-${ARCH}.tar.gz"
URL="https://nodejs.org/dist/v${ENV_NODE_VERSION}/${TAR_FILE}"

cd /tmp
wget $URL
tar xzf ${TAR_FILE}
cd $B_DIR
tar cf - bin include lib share | (cd /usr/local; sudo tar xvf -)